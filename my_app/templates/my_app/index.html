{% extends "my_app/base.html" %}

{% block content %} 
    {% if user_list %}
    <form action="" method="POST">
    {% csrf_token %}
        <table class="table table-striped">
            <tr>
              <td>Id</td>
              <td>Login</td>
              <td>Full_name</td>
              <td>Token</td>
              <td>Total_msg</td>
              <td>Success_msg</td>
              <td>Failed_msg</td>
            </tr>
            {% for this_user in user_list %}
               {% if this_user.id == user.id or check_edit %}
                    <tr>
                        <td>{{ this_user.id }}</td>
                        <td>{{ this_user.username }}</td>
                        <td>{{ this_user.get_full_name }}</td>
                        <td>
                            {% for profile in this_user.prof.all %}
                                {{ profile.token }}<br/>
                            {% endfor %}
                        </td>
                        <td>{{ this_user.msg.total_msg_counter }}</td>
                        <td>{{ this_user.msg.success_msg_counter }}</td>
                        <td>{{ this_user.msg.failed_msg_counter }}</td>
                        <td>
                            <a href="edit/{{ this_user.id }}" class="btn btn-sm btn-warning">Edit</a>
                        </td>
                        <td><button name="delete" value="{{this_user.id}}" class="btn btn-sm btn-danger">delete</button></td>
                        {% if edit_perm %}
                            <td>
                                <a href="permission/{{ this_user.id }}" class="btn btn-sm btn-warning">Permission</a>
                            </td>
                            {% endif %}
                    </tr>
                {% endif %}
            {% endfor %}
        </table> 
    </form>
    {% else %}
    <p>No users are available.</p>
    {% endif %}
  {% if username %}
    <a href="/auth/registration" class="btn btn-sm btn-primary" id="is_it_users" >ADD</a>
  {% endif %}
{% endblock %}